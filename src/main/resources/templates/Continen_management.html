
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>
       地域管理
    </title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="../static/css/x-admin.css" media="all">
    <script type="text/javascript" src="../static/js/jquery-3.3.1.js"></script>
    <script type="text/javascript" src="../static/js/vue.js"></script>
</head>
<body>

<div class="x-nav">
            <span class="layui-breadcrumb">
              <a><cite>首页</cite></a>
              <a><cite>地域管理</cite></a>
            </span>
</div>
<form class="layui-form x-center" action="" style="width:500px">
    <div class="layui-form-pane" style="margin-top: 15px;">
        <div class="layui-form-item">
            <div class="layui-input-inline" style="width:400px">
                <input type="text" name="username"  placeholder="搜索内容" autocomplete="off" class="layui-input">
            </div>
            <div class="layui-input-inline" style="width:80px">
                <button class="layui-btn"  lay-submit="" lay-filter="sreach"><i class="layui-icon">&#xe615;</i></button>
            </div>
        </div>
    </div>
</form>
<div class="x-body">
    <xblock><button class="layui-btn layui-btn-danger" onclick="delAll()"><i class="layui-icon">&#xe640;</i>批量删除</button><span class="x-right" style="line-height:20px"><button class="layui-btn" onclick="Warning_management_add('添加类型','Warning_management_add.html','600','500')"><i class="layui-icon">&#xe608;</i>添加</button></span></xblock>
    <div id="div">
    <table class="layui-table">

        <thead>
        <tr>
            <th>请选择</th>
            <th>编号</th>
            <th>地域名称</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody id="x-link">
        <tr v-for="continent in page.list">
            <td width="50"><input type="checkbox"  name="checkbox" /></td>
            <td  class="continentId">{{continent.continentId}}</td>
            <td>{{continent.continentName}}</td>
            <td class="td-manage">
                <a title="修改" href="javascript:;" onclick="data_management_look('修改','updateContinen','4','','510')"
                   class="ml-5" style="text-decoration:none">
                    <i class="layui-icon" id="cid">&#xe642;</i>
                </a>
                <a title="删除" href="javascript:;" onclick="data_management_del(this,'1')"
                   style="text-decoration:none">
                    <i class="layui-icon">&#xe640;</i>
                </a>
            </td>
        </tr>
        </tbody>
    </table>

    <div id="page">
        <ul class="page-num-ul clearfix">
            <li>共条<span>{{page.totalCount}}</span>记录&nbsp;&nbsp;
                <span id="dangqian">{{page.pageIndex}}</span>/<span id="mo">{{page.totalPage}}</span> 页</li>
            <div v-if="page.pageIndex>1">
                <a id="shou" v-on:click="shou">首页</a>
                <a id="shang" v-on:click="shang">上一页</a>
            </div>
            <div v-if="page.pageIndex<page.totalPage">
                <a id="xia" v-on:click="xia">下一页</a>
                <a id="mo2" v-on:click="mo">最后一页</a>
            </div>
        </ul>
    </div>
</div>
</div>

<script>
   layui.use(['element','laypage','layer','form'], function(){
        $ = layui.jquery;//jquery
        lement = layui.element();//面包导航
       /* laypage = layui.laypage;//分页*/
        layer = layui.layer;//弹出层
        form = layui.form();//弹出层
    });

   //以上模块根据需要引入

   //批量删除提交
   function delAll () {
       var checkArry = document.getElementsByName("checkbox");
       for (var i = 0; i < checkArry.length; i++) {
           if(checkArry[i].checked == true){
               //选中的操作
               $("#x-link").find("tr").each(function(){
                   var tdArr = $(this).children().text();

                   var t1 =$(this).find('td').eq(1).text();
                   alert(t1);



               });
               layer.confirm('确认要删除吗？',function(index){
                   //捉到所有被选中的，发异步进行删除
                   layer.msg('删除成功', {icon: 1});
               });

               return;
           }
       }
   }

    /*用户-添加*/
    function Warning_management_add(title,url,w,h){
        x_admin_show(title,url,w,h);
    }

    // 编辑
    function data_management_look (title,url,id,w,h) {
        x_admin_show(title,url,w,h);
    }

    /*删除*/
    function data_management_del(obj,id){
        layer.confirm('确认要删除吗？',function(index){
            //发异步删除数据
            $(obj).parents("tr").remove();
            layer.msg('已删除!',{icon:1,time:1000});
        });
    }

   $(document).ready(function(){
       var index;
       var vuee=new Vue({
           el:"#div",
           data:{
               continen:[],
               page:{}
           },
           methods:{
               xia:function () {
                   index=parseInt($("#dangqian").text())+1;
                   fenye();
               },
               shang:function () {
                   index=parseInt($("#dangqian").text())-1;
                   fenye();
               },
               shou:function () {
                   index=1;
                   fenye();
               },
               mo:function () {
                   index=parseInt($("#mo").text());
                   fenye();
               }
           }
       })

       //分页
       function  fenye() {
           $.ajax({
               url:"continen",
               data:{pageIndex:index},
               type:"post",
               dataType:"json",
               success:function(data){
                   vuee.page=data;
               }

           })
       }

       $.ajax({
           url:"continen",
           data:{pageIndex:1},
           type:"post",
           dataType:"json",
           success:function(data){;
               vuee.page=data;
           }
       })
   });
</script>
</body>
</html>