<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.travelms.dao.OrderDao">

<select id="selectOrder" resultType="Order">
    SELECT * FROM `order`
    <where>
        <if test="order.orderId!=null"> or orderId LIKE CONCAT ('%',#{order.orderId},'%')</if>
        <if test="order.orderNum !=null"> or orderNum LIKE CONCAT ('%',#{order.orderNum},'%')</if>
        <if test="order.orderTime!=null"> or orderTime LIKE CONCAT ('%',#{order.orderTime},'%')</if>
        <if test="order.price !=null"> or price LIKE CONCAT ('%',#{order.price},'%')</if>
        <if test="order.destination !=null"> or destination LIKE CONCAT ('%',#{order.destination},'%')</if>
        <if test="order.status !=null"> or status LIKE CONCAT ('%',#{order.status},'%')</if>
        <if test="order.city !=null"> or city LIKE CONCAT ('%',#{order.city},'%')</if>
        <if test="order.itemname !=null"> or itemname LIKE CONCAT ('%',#{order.itemname},'%')</if>
        <if test="order.roomnum !=null"> or roomnum LIKE CONCAT ('%',#{order.roomnum},'%')</if>
        <if test="order.ispayment !=null"> or ispayment LIKE CONCAT ('%',#{order.ispayment},'%')</if>
    </where>
        ORDER BY orderTime DESC
        LIMIT #{pageIndex},#{pageSize}
</select>
  <select id="orderCount" resultType="Integer">
     SELECT COUNT(*) FROM  `order`
      <where>
          <if test="order.orderId!=null"> or orderId LIKE CONCAT ('%',#{order.orderId},'%')</if>
          <if test="order.orderNum !=null"> or orderNum LIKE CONCAT ('%',#{order.orderNum},'%')</if>
          <if test="order.orderTime!=null"> or orderTime LIKE CONCAT ('%',#{order.orderTime},'%')</if>
          <if test="order.price !=null"> or price LIKE CONCAT ('%',#{order.price},'%')</if>
          <if test="order.destination !=null"> or destination LIKE CONCAT ('%',#{order.destination},'%')</if>
          <if test="order.status !=null"> or status LIKE CONCAT ('%',#{order.status},'%')</if>
          <if test="order.city !=null"> or city LIKE CONCAT ('%',#{order.city},'%')</if>
          <if test="order.itemname !=null"> or itemname LIKE CONCAT ('%',#{order.itemname},'%')</if>
          <if test="order.roomnum !=null"> or roomnum LIKE CONCAT ('%',#{order.roomnum},'%')</if>
          <if test="order.ispayment !=null"> or ispayment LIKE CONCAT ('%',#{order.ispayment},'%')</if>
      </where>
      ORDER BY orderTime DESC
  </select>
</mapper>